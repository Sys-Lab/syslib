SYSLIB={ver:0,settings:{release:0,loglevel:0,set:function(e){for(var t in e[t])SYSLIB.settings[t]=e[t]}},namespaces:{},namespace:function(e,t){var e=e.split("."),n=SYSLIB.namespaces[e[0]],r=1;if(t&&-1!=t){if("object"!=typeof t){var o=[];o[0]=t,t=o}for(r=0;r<t.length;r++)if(!SYSLIB.namespace(t[r],-1))return __Error.log(2,"Namespace : can't find required ns "+t[r]),void 0}for("function"!=typeof n&&(SYSLIB.namespaces[e[0]]=function(){},n=SYSLIB.namespaces[e[0]]),r=1;r<e.length;r++){if("function"!=typeof n[e[r]]){if(-1==t)return 0;n[e[r]]=function(){}}n=n[e[r]]}return n},included:{},includePath:"",include_need:0,include_end_callback:0,include_checklock:0,check_loadend:function(){SYSLIB.include_checklock&&clearTimeout(SYSLIB.include_checklock),SYSLIB.include_checklock=setTimeout(function(){__Error.log(0,"INCLUDE : all file loaded"),!SYSLIB.include_need&&$this.include_end_callback&&(SYSLIB.include_end_callback(),SYSLIB.include_end_callback=0)},500)},include:function(e,t){var n="string"==typeof e?[e]:e,r=0;for(t&&(SYSLIB.include_end_callback=t),r=0;r<n.length;r++){var o=n[r].split("#");if("!"==o[1]&&(SYSLIB.included[SYSLIB.includePath+o[0]]=0),!SYSLIB.included[SYSLIB.includePath+o[0]]){var i=o[0].replace(/^\s|\s$/g,""),a=i.split("."),s=a[a.length-1].toLowerCase(),l="css"==s,u=l?"link":"script",c=document.createElement(u),d=SYSLIB.includePath+i;l?(c.setAttribute("rel","stylesheet"),c.setAttribute("href",d)):c.setAttribute("src",d),$newnode.includeLink=$newnode,__Error.log(0,"INCLUDE : including "+$newnode),document.body.appendChild(c),$newnode.onload=function(){__Error.log(0,"INCLUDE : included "+this.includeLink),SYSLIB.include_need--,SYSLIB.check_loadend()},SYSLIB.included[SYSLIB.includePath+o[0]]=1}}},exclude:function(e,t){__Error.log(0,"EXCLUDE : excluded "+t+": "+e);var n="js"==t?"script":"css"==t?"link":"none",r="js"==t?"src":"css"==t?"href":"none",o=document.getElementsByTagName(n),i=o.length;for(i=o.length;i>=0;i--)o[i]&&null!=o[i].getAttribute(r)&&-1!=o[i].getAttribute(r).indexOf(e)&&o[i].parentNode.removeChild(o[i])},baseurl:window.location.protocol+"//"+window.location.hostname};var __Error=SYSLIB.namespace("syslib.error");__Error.List=[],__Error.log=function(e,t){return!SYSLIB.settings.loglevel||SYSLIB.settings.loglevel<e?(console.log("%c"+["Notice: ","Warn: ","Error: "][e],["color:#5353E5","color:#F7620E","color:#F81325"][e]),console.log("%c"+t,["background:#AED8FA","background:#FCCEB4","background:#F199A0"][e])):void 0},window.onerror=function(e,t,n){return __Error.log(2,e+" onLine :"+(n?n:"unknow Of ")+(t?t:"unknow File")),SYSLIB.settings.release?!0:!1};var __Math=SYSLIB.namespace("syslib.math");__Math.has=function(e,t){var n=0;e=e.length?e:[e],t=t.length?t:[t];for(var r=0;r<e.length;r++)for(var o=0;o<t.length;o++)e[r]==t[o]&&n++;return n>=t.length},__Math.rand=function(e,t,n){var r=e+Math.random()*(t-e);return n?n>0?(r=r.toString().split("."),r[1]=r[1].substr(0,n),r=r.join("."),parseFloat(r)):r:Math.floor(r)},__Dom=SYSLIB.namespace("syslib.dom"),__Dom.domcache={allnodes:[],byid:{},byclass:{},bytag:{},byattr:{}},__Dom.fresh=function(){__Dom.domcache={allnodes:[],byid:{},byclass:{},bytag:{},byattr:{}},__Dom.findall(document.body),__Error.log(0,"DOM : fresh cache.")},__Dom.nodeparser=function(e){return e.find=function(e){return __Dom.find(e,this)},e.search=function(e){return __Dom.search(e,this)},e.searchcontent=function(e){return __Dom.searchcontent(e,this)},e.has=function(e){return __Dom.class(this).has(e)},e.class=function(){return __Dom.class(this).get()},e.add=function(e){return __Dom.class(this).add(e)},e.remove=function(e){return __Dom.class(this).remove(e)},e.replace=function(e,t){return __Dom.class(this).replace(e,t)},__Event&&(e.addListener=function(e,t,n,r){return __Event.Listen(e,t,n,r,this)},e.removeListener=function(e,t,n,r){return __Event.unListen(e,t,n,r,this)}),__Util&&(e.globalposition=function(){return __Util.globalposition(this)}),e},__Dom.findall=function(e){if(e.tagName){var t=e.childNodes;if(__Dom.domcache.allnodes.push(__Dom.nodeparser(e)),t)if(t.length>0){var n=0;for(n=0;n<t.length;n++)__Dom.findall(t[n])}else __Dom.findall(t)}},__Dom.find=function(e,t){this.findthis=function(e,t){var n=e.split("#"),r=0;if(n[1]){if(t){var o=[],i=0;for(i=0;i<t.length;i++)r=t[i],r.id&&r.id==n[1]&&(r&&(r=__Dom.nodeparser(r)),o.push(r));return o}return r=__Dom.domcache.byid[n[1]]?__Dom.domcache.byid[n[1]]:document.getElementById(n[1]),r=r?r:0,r&&(r=__Dom.nodeparser(r),__Dom.domcache.byid[n[1]]=r),r}if(n=e.split("."),n[1]){if(t){var o=[],i=0;for(i=0;i<t.length;i++)r=t[i],r.className&&r.className==n[1]&&(r&&(r=__Dom.nodeparser(r)),o.push(r));return o}return r=__Dom.domcache.byclass[n[1]]?__Dom.domcache.byclass[n[1]]:document.getElementsByClassName(n[1]),r=r?r:0,r&&(r=__Dom.nodeparser(r),__Dom.domcache.byclass[n[1]]=r),r}if(n=e.split("<"),n[1]){if(n=n[1].split(">"),t){var o=[],i=0;for(i=0;i<t.length;i++)r=t[i],r.tagName&&r.tagName.toUpperCase()==n[0].toUpperCase()&&o.push(r);return o}return r=__Dom.domcache.bytag[n[0]]?__Dom.domcache.bytag[n[0]]:document.getElementsByTagName(n[0]),r=r?r:0,r&&(r=__Dom.nodeparser(r),__Dom.domcache.bytag[n[0]]=r),r}if(n=e.split(" = "),n[1]){if(n[1]=n[1].split("]")[0],n[0]=n[0].split("[")[1],t){var o=[],i=0;for(i=0;i<t.length;i++)r=t[i],r.getAttribute&&r.getAttribute(n[0])&&r.getAttribute(n[0])==n[1]&&(r&&(r=__Dom.nodeparser(r)),o.push(r));return o}if(__Dom.domcache.byattr[n[0]])r=__Dom.domcache.byattr[n[0]];else{__Dom.domcache.allnodes&&0!=__Dom.domcache.allnodes.length||__Dom.freshdomcache();for(var a=0;a<__Dom.domcache.allnodes.length;a++){var s=__Dom.domcache.allnodes[a];s.getAttribute(n[0])&&s.getAttribute(n[0])==n[1]&&(r||(r=[]),s&&(s=__Dom.nodeparser(s)),r.push(s))}}return r=r?r:0,r&&(__Dom.domcache.byattr[n[0]]=r),r}};var n=0,r=0;if(t)if(t.tagName)var o=__Dom.findall(t);else var o=t;else var o=0;if(__Error.log(0,"DOM : find "+e),e.indexOf("&&")>0){for(r=e.split("&&"),n=0;n<r.length;n++)if(o=this.findthis(r[n],o),!o)return 0;return o}return this.findthis(e,o)},__Dom.search=function(e,t){this.searchthis=function(e,t){var n=e.split("#"),r=0;if(!t)var t=__Dom.domcache.allnodes;if(n[1]){var o=[],i=0;for(i=0;i<t.length;i++)r=t[i],r.id&&r.id.match(n[1])&&(r&&(r=__Dom.nodeparser(r)),o.push(r));return o}if(n=e.split("."),n[1]){var o=[],i=0;for(i=0;i<t.length;i++)r=t[i],r.className&&r.className.match(n[1])&&(r&&(r=__Dom.nodeparser(r)),o.push(r));return o}if(n=e.split("<"),n[1]){n=n[1].split(">");var o=[],i=0;for(i=0;i<t.length;i++)r=t[i],r.tagName&&r.tagName.toUpperCase().match(n[0])&&(r&&(r=__Dom.nodeparser(r)),o.push(r));return o}if(n=e.split(" = "),n[1]){n[1]=n[1].split("]")[0],n[0]=n[0].split("[")[1];var o=[],i=0;for(i=0;i<t.length;i++)r=t[i],r.getAttribute&&r.getAttribute(n[0])&&r.getAttribute(n[0]).match(n[1])&&(r&&(r=__Dom.nodeparser(r)),o.push(r));return o}};var n=0,r=0;if(t)if(t.tagName)var o=__Dom.findall(t);else var o=t;else{var o=0;__Dom.domcache.allnodes&&0!=__Domcache.allnodes.length||__Dom.freshdomcache()}if(__Error.log(0,"DOM : search "+e),e.indexOf("&&")>0){for(r=e.split("&&"),n=0;n<r.length;n++)if(o=this.searchthis(r[n],o),!o)return 0;return o}return this.searchthis(e,o)},__Dom.searchcontent=function(e,t){if(!t){__Dom.domcache.allnodes&&0!=__Dom.domcache.allnodes.length||__Dom.freshdomcache();var t=__Dom.domcache.allnodes}var n=[],r=0;for(r=0;r<t.length;r++)$nodes=t[r],$nodes.innerHTML&&$nodes.innerHTML.match(e)&&($nodes&&($nodes=__Dom.nodeparser($nodes)),n.push($nodes));return __Error.log(0,"DOM : searchcontent "+e),n},__Dom.class=function(e){if(e){var t={};return t.domnode=e,t.domnode.length||(t.domnode=[t.domnode]),t.has=function(e){var n=!0,e=e.split(" "),r=0;for(r=0;r<t.domnode.length;r++){var o=t.domnode[r],i=o.className?o.className.split(" "):[];__Math.has(i,e)||(n=!1)}return n},t.get=function(){var e=[],n=0;for(n=0;n<t.domnode.length;n++){var r=t.domnode[n],o=r.className?r.className.split(" "):"",i=0;for(i=0;i<o.length;i++)e.indexOf(o[i])<0&&""!=o[i]&&e.push(o[i])}return e},t.add=function(e){var e=e.split(" "),n=0;for(n=0;n<t.domnode.length;n++){var r=t.domnode[n],o=r.className?r.className.split(" "):[],o=""!=o?o:[],i=0;for(i=0;i<e.length;i++)__Math.has(o,[e[i]])||(o.length?o.push(e[i]):o=[e[i]]);r.className=o.join(" ")}},t.remove=function(e){var e=e.split(" "),n=0;for(n=0;n<t.domnode.length;n++){var r=t.domnode[n],o=r.className.split(" ")||"",i=0;for(i=0;i<e.length&&o;i++)__Math.has(o,[e[i]])&&o.splice(o.indexOf(e[i]),1);r.className=o.join(" ")}},t.replace=function(e,n){var e=e.split(" "),n=n.split(" "),r=0;for(r=0;r<t.domnode.length;r++){var o=t.domnode[r],i=o.className.split(" ");if(i=""!=i?i:[],i!=[]){var a=1,s=0;for(s=0;s<e.length;s++)__Math.has(i,[e[s]])||(a=0);if(a){for(s=0;s<e.length;s++)i.indexOf(e[s])>=0&&i.splice(i.indexOf(e[s]),1);for(s=0;s<n.length;s++)i.indexOf(n[s])<0&&(i.length?i.push(n[s]):i=[n[s]]);o.className=i.join(" ")}}}},t}};var _f=SYSLIB.namespace("syslib.dom").find,_search=SYSLIB.namespace("syslib.dom").search,_c=SYSLIB.namespace("syslib.dom").class,HEIGHTEST=0,LOWEST=Math.pow(2,53),__Event=SYSLIB.namespace("syslib.event");__Event.Listeners={},__Event.Listen=function(e,t,n,r,o){o||(o="global"),o.eventtoken||(o.eventtoken=__Util.token(),"global"!=o&&o.setAttribute("eventtoken",o.eventtoken)),__Event.Listeners[o.eventtoken]||(__Event.Listeners[o.eventtoken]=new Object),__Event.Listeners[o.eventtoken][e]||(__Event.Listeners[o.eventtoken][e]=new Array,"global"!=o&&(Element.prototype.addEventListener?o.addEventListener(e,function(t){__Event.emit(e,t,o,this)},!1):o.attachEvent("on"+e,function(){__Event.emit(e,window.event,o,this)})));var i=o.id?"#"+o.id:o.eventtoken;if(listenerList=__Event.Listeners[o.eventtoken][e],r)if(listenerList[r]){if(r==LOWEST)return __Error.log(2,"Event : Event "+i+"."+e+"'s Listener with LOWEST Level is used."),void 0;for(var a=r;listenerList[a]&&LOWEST>a;)a++;if(listenerList[a])return __Error.log(2,"Event : Event "+i+"."+e+"'s Listener with Level "+r+" is used. Tried using lower Level but all is used."),void 0;listenerList[a]={listener:t,nopopup:n},a==LOWEST?__Error.log(1,"Event : Event "+i+"."+e+"'s Listener with Level "+r+" is used. Using LOWEST level instead."):__Error.log(1,"Event : Event "+i+"."+e+"'s Listener with Level "+r+" is used. Using "+a+" level instead.")}else listenerList[r]={listener:t,nopopup:n},r==LOWEST?__Error.log(0,"Event : Event "+i+"."+e+"'s Listener with LOWEST level added."):__Error.log(0,"Event : Event "+i+"."+e+"'s Listener with Level "+r+" is added.");else listenerList.push({listener:t,nopopup:n}),__Error.log(0,"Event : Event "+i+"."+e+"'s Listener with Level "+listenerList.length+" is added.")},__Event.unListen=function(e,t,n,r,o,i){if(o||(o="global"),!o.eventtoken)return __Error.log(1,"Event : element With no eventtoken!"),void 0;var a=o.id?"#"+o.id:o.eventtoken;if(!__Event.Listeners[o.eventtoken]||!__Event.Listeners[o.eventtoken][e])return __Error.log(1,"Event : Event "+a+"."+e+" has no Listener to unListen !"),void 0;for(var s=__Event.Listeners[o.eventtoken][e],l=0;l<s.length&&(!s[l]||!s[l].listener||s[l].listener!=t||s[l].nopopup!=n||(__Error.log(0,"Event : Event "+a+"."+e+"'s Listener with Level "+l+" is removed."),s.splice(l,1),i));l++);},__Event.emit=function(e,t,n,r){if(n||(n="global"),!n.eventtoken)return __Error.log(1,"Event : element With no eventtoken!"),void 0;var o=n.id?"#"+n.id:n.eventtoken;if(!__Event.Listeners[n.eventtoken]||!__Event.Listeners[n.eventtoken][e]||!__Event.Listeners[n.eventtoken][e].length)return __Error.log(1,"Event : Event "+o+"."+e+" has no Listener !"),void 0;var i=__Event.Listeners[n.eventtoken][e];__Error.log(0,"Event : Event "+e+" emit !");for(var a=0;a<i.length;a++)if(i[a]){var s=i[a].nopopup;if(i[a].listener&&(__Error.log(0,"Event : Event "+o+"."+e+" emit Listener with level "+a),i[a].listener.call(r,t)),s){__Error.log(0,"Event : Event "+o+"."+e+" emit break on level "+a);break}}};var _listen=SYSLIB.namespace("syslib.event").Listen,_unlisten=SYSLIB.namespace("syslib.event").unListen;__Template=SYSLIB.namespace("syslib.template"),__Template.build=function(e,t){var n=e.toString().replace(/^[^\/]+\/\*!?\s?/,"").replace(/\*\/[^\/]+$/,"");return n=n.replace(/\%\$([0-9])*\%/g,function(n){var r=n.replace(/\%/g,"");return r=parseInt(r.replace(/\$/g,"")),r&&t&&"undefined"!=typeof t[r-1]?t[r-1]:(__Error.log(2,"Mutilstring : can't find "+r+" in vals . in "+e),n)}),n=n.replace(/\%\#([^\%]*)\%/g,function(t){var n=t.replace(/\%/g,"");return n=n.replace(/\#/g,""),n&&$SYS_LAN&&"undefined"!=typeof $SYS_LAN[n]?$SYS_LAN[n]:(__Error.log(2,"Mutilstring : can't find "+n+" in Lan file . in "+e),t)}),n=n.replace(/\%\&([^\%]*)\%/g,function(e){var t=e.replace(/\%/g,"");return t=t.replace(/\&/g,""),window.innerWidth/1366*parseInt(t)}),n=n.replace(/\%\@([^\%]*)\%/g,function(e){var t=e.replace(/\%/g,"");return t=t.replace(/\@/g,""),window.innerHeight/682*parseInt(t)})};var _template=SYSLIB.namespace("syslib.template").build;__Model=SYSLIB.namespace("syslib.model"),__Model.t=function(e){return __Model.list[e]||__Error.log(1,"Model : model "+e+" dosen't exist ."),__Model.list[e]},__Model.list={},__Model.add=function(e,t,n,r,o,i,a){if(__Model.list[e])return __Error.log(1,"Model : model "+e+" already exist ."),void 0;n&&(SYSLIB.includePath=n.p?n.p:"",SYSLIB.include(n.f)),i||(i=document.getElementById("sys_main_playground"));var s=__Model.build(e,t,r,o,i,a);__Model.list[e]=s},__Model.draw=function(e,t){__Model.list[e].draw(t)},__Model.setstatue=function(e,t){__Model.list[e].setstatue(t)},__Model.jump_to=function(mod,statue,setdata){if(SYS_hide_all_mod&&SYS_hide_all_mod(),setdata){var tmp;for(tmp in setdata){var ii=tmp+" = '"+setdata[tmp]+"'";eval(ii)}}setTimeout(function(){_m(mod).to(statue)},600)},__Model.build=function(e,t,n,r,o,i){var a={html:t,father:o,id:"SYS_MD_"+e,node:document.createElement("div"),statues:{},name:e,statue:"",laststatue:"",formats:i,rebuild:function(){a.statue="",a.laststatue="",a.node.innerHTML=__Template.build(a.html,a.formats),_Dom.freshdomcache(),a.initfunc&&a.initfunc()},to:function(t){var n=__Model.list[a.name].statues[t];if(!n)return __Error.log(1,"Model : model "+e+"'s statue "+t+" doesn't exist ."),void 0;if(n.file){__Model.list[a.name].statues[t]=0,SYSLIB.includePath=n.file.p,SYSLIB.includePath=n.file.p?n.file.p:"",n.file.loadingani&&n.file.loadingani.start&&n.file.loadingani.start();var r=t;SYSLIB.include(n.file.f);var o=0,i=function(e,t,n){if(__Model.list[e.name].statues[t]){n.file.loadingani&&n.file.loadingani.ok&&n.file.loadingani.ok();var i=e;return setTimeout(function(){i.to(r)},2e3),clearInterval(o),void 0}console.log("nothis")},r=t;return o=setInterval(function(){i(a,r,n)},500),void 0}__Model.list[a.name].statues[t](),a.statue=t,"hide"!=t&&(a.laststatue=t)},addstatue:function(t,n,r,o){return __Model.list[a.name].statues[t]?(__Error.log(1,"Model : model "+e+"'s statue "+t+" already exist ."),void 0):(o?__Model.list[a.name].statues[t]={file:o}:(__Model.list[a.name].statues[t]=n,r&&(SYSLIB.includePath=r.p?r.p:"",SYSLIB.include(r.f))),void 0)}};if(a.node.innerHTML=__Template.build(t,i),a.node.id=a.id,n&&(a.initfunc=n),r)for(var s in r)a.node.setAttribute(s,r[s]);return o.appendChild(a.node),a.initfunc&&a.initfunc(),a};var _m=SYSLIB.namespace("syslib.model").t,JUMP_TO=SYSLIB.namespace("syslib.model").jump_to;"function"!=typeof Object.create&&(Object.create=function(e){function t(){}return t.prototype=e,new t}),!function(e){var t=e.snack={},n=0,r=Object.prototype.toString,o=[].indexOf,i=[].push;t.extend=function(){if(1==arguments.length)return t.extend(t,arguments[0]);for(var e,n=arguments[0],r=1,o=arguments.length;o>r;r++)for(e in arguments[r])n[e]=arguments[r][e];return n},t.extend({v:"1.2.3",bind:function(e,t,n){return n=n||[],function(){return i.apply(n,arguments),e.apply(t,n)}},punch:function(e,n,r,o){var i=e[n];e[n]=o?function(){return i.apply(e,arguments),r.apply(e,arguments)}:function(){var n=[].slice.call(arguments,0);return n.unshift(t.bind(i,e)),r.apply(e,n)}},create:function(e,n){var r=Object.create(e);if(!n)return r;for(var o in n)n.hasOwnProperty(o)&&(e[o]&&"function"==typeof n[o]?t.punch(r,o,n[o]):r[o]=n[o]);return r},id:function(){return++n},each:function(e,t,n){if(void 0===e.length){for(var r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r,e);return e}for(var o=0,i=e.length;i>o;o++)t.call(n,e[o],o,e);return e},parseJSON:function(t){if("string"==typeof t){t=t.replace(/^\s+|\s+$/g,"");var n=/^[\],:{}\s]*$/.test(t.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""));if(!n)throw"Invalid JSON";var r=e.JSON;return r&&r.parse?r.parse(t):new Function("return "+t)()}},isArray:function(e){return e instanceof Array||"[object Array]"==r.call(e)},indexOf:o?function(e,t){return o.call(t,e)}:function(e,t){for(var n=0,r=t.length;r>n;n++)if(t[n]===e)return n;return-1}})}(window),!function(e,t){var n,r={};e.wrap=function(t,o){"string"==typeof t&&(t=n(t,o)),t.length||(t=[t]);for(var i=Object.create(r),a=0,s=t.length;s>a;a++)i[a]=t[a];return i.length=s,i.id=e.id(),i},e.extend(e.wrap,{define:function(t,n){if("string"!=typeof t)for(var o in t)e.wrap.define(o,t[o]);else r[t]=n},defineEngine:function(e){n=e}}),e.wrap.defineEngine(function(e,n){return"string"==typeof n&&(n=t.querySelector(n)),(n||t).querySelectorAll(e)})}(snack,document),!function(e,t,n){function r(){try{c.doScroll("left")}catch(e){return setTimeout(r,50),void 0}o("poll")}function o(r){("readystatechange"!=r.type||"complete"==n.readyState)&&(("load"==r.type?t:n)[a](s+r.type,o,!1),!l&&(l=!0)&&e.each(d,function(e){e.apply(n)}))}var i=n.addEventListener?"addEventListener":"attachEvent",a=n.addEventListener?"removeEventListener":"detachEvent",s=n.addEventListener?"":"on",l=!1,u=!0,c=n.documentElement,d=[];if(e.extend({stopPropagation:function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},preventDefault:function(e){e.preventDefault?e.preventDefault():e.returnValue=!1}}),e.listener=function(t,r){t.delegate&&(t.capture=!0,_handler=r,r=function(r){for(var o=r.target||r.srcElement,i="string"==typeof t.delegate?e.wrap(t.delegate,t.node):t.delegate(t.node);o&&-1==e.indexOf(o,i);)o=o.parentNode;o&&o!==this&&o!==n&&_handler.call(o,r,o)}),t.context&&(r=e.bind(r,t.context));var o={attach:function(){t.node[i](s+t.event,r,t.capture)},detach:function(){t.node[a](s+t.event,r,t.capture)},fire:function(){r.apply(t.node,arguments)}};return o.attach(),o},e.ready=function(e){l?e.apply(n):d.push(e)},n.createEventObject&&c.doScroll){try{u=!t.frameElement}catch(f){}u&&r()}n[i](s+"DOMContentLoaded",o,!1),n[i](s+"readystatechange",o,!1),t[i](s+"load",o,!1)}(snack,window,document),!function(e){e.publisher=function(t){var n={};return t=t||{},e.extend(t,{subscribe:function(t,r,o){var i={fn:r,ctxt:o||{}};n[t]||(n[t]=[]);var a={attach:function(){n[t].push(i)},detach:function(){n[t].splice(e.indexOf(r,n[t]),1)}};return a.attach(),a},publish:function(t,r){return n[t]?(e.each(n[t],function(e){e.fn.apply(e.ctxt,r||[])}),n[t].length):!1}}),t},e.publisher(e)}(snack),!function(e,t,n){function r(){}e.JSONP=function(t,r){var o="jsonp"+e.id(),i=n.createElement("script"),a=!1;e.JSONP[o]=function(t){a=!1,delete e.JSONP[o],r(t)},"object"==typeof t.data&&(t.data=e.toQueryString(t.data));var s={send:function(){a=!0,i.src=t.url+"?"+t.key+"=snack.JSONP."+o+"&"+t.data,n.getElementsByTagName("head")[0].appendChild(i)},cancel:function(){a&&i.parentNode&&i.parentNode.removeChild(i),a=!1,e.JSONP[o]=function(){delete e.JSONP[o]}}};return t.now!==!1&&s.send(),s},e.toQueryString=function(t,n){var r=[];return e.each(t,function(t,o){n&&(o=n+"["+o+"]");var i;if(e.isArray(t)){var a={};e.each(t,function(e,t){a[t]=e}),i=e.toQueryString(a,o)}else i="object"==typeof t?e.toQueryString(t,o):o+"="+encodeURIComponent(t);null!==t&&r.push(i)}),r.join("&")};var o=function(){var e=function(){return new XMLHttpRequest},t=function(){return new ActiveXObject("MSXML2.XMLHTTP")},n=function(){return new ActiveXObject("Microsoft.XMLHTTP")};try{return e(),e}catch(r){try{return t(),t}catch(r){return n(),n}}}();e.request=function(t,n){if(!(this instanceof e.request))return new e.request(t,n);var r=this;r.options=e.extend({},r.options,t),r.callback=n,r.xhr=new o,r.headers=r.options.headers,r.options.now!==!1&&r.send()},e.request.prototype={options:{exception:r,url:"",data:"",method:"get",now:!0,headers:{"X-Requested-With":"XMLHttpRequest",Accept:"text/javascript, text/html, application/xml, text/xml, */*"},async:!0,emulation:!0,urlEncoded:!0,encoding:"utf-8"},onStateChange:function(){var e=this,t=e.xhr;if(4==t.readyState&&e.running){e.running=!1,e.status=0;try{var n=t.status;e.status=1223==n?204:n}catch(o){}t.onreadystatechange=r;var i=e.status>=200&&e.status<300?[!1,e.xhr.responseText||"",e.xhr.responseXML]:[e.status];e.callback.apply(e,i)}},setHeader:function(e,t){return this.headers[e]=t,this},getHeader:function(e){try{return this.xhr.getResponseHeader(e)}catch(t){return null}},send:function(){var t=this,r=t.options;if(t.running)return t;t.running=!0;var o=r.data||"",i=String(r.url),a=r.method.toLowerCase();if("string"!=typeof o&&(o=e.toQueryString(o)),r.emulation&&e.indexOf(a,["get","post"])<0){var s="_method="+a;o=o?s+"&"+o:s,a="post"}if(r.urlEncoded&&e.indexOf(a,["post","put"])>-1){var l=r.encoding?"; charset="+r.encoding:"";t.headers["Content-type"]="application/x-www-form-urlencoded"+l}i||(i=n.location.pathname);var u=i.lastIndexOf("/");u>-1&&(u=i.indexOf("#"))>-1&&(i=i.substr(0,u)),o&&"get"==a&&(i+=(i.indexOf("?")>-1?"&":"?")+o,o=null);var c=t.xhr;c.open(a.toUpperCase(),i,open.async,r.user,r.password),r.user&&"withCredentials"in c&&(c.withCredentials=!0),c.onreadystatechange=e.bind(t.onStateChange,t);for(var d in t.headers)try{c.setRequestHeader(d,t.headers[d])}catch(f){r.exception.apply(t,[d,t.headers[d]])}return c.send(o),r.async||t.onStateChange(),t},cancel:function(){var e=this;if(!e.running)return e;e.running=!1;var t=e.xhr;return t.abort(),t.onreadystatechange=r,e.xhr=new o,e}}}(snack,window,document),!function(e){function t(t,n,r,o){var i=t.data(r);return i&&e.each(i,function(e){e[n].apply(t,o)}),t}function n(e){return e.replace(/\s+/g," ").replace(/^\s+|\s+$/g,"")}e.wrap.define({data:function(){var e={};return function(t,n){var r=e[this.id];return r||(r=e[this.id]={}),void 0===n?r[t]:r[t]=n}}(),each:function(t,n){return e.each(this,t,n)},addClass:function(e){return this.each(function(t){n(t.className).indexOf(e)>-1||(t.className=n(t.className+" "+e))})},removeClass:function(e){return this.each(function(t){t.className=t.className.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)"),"$1")})},attach:function(t,n,r){var o=t.split("."),i=[];return o[1]&&(i=this.data(o[1])||[]),this.each(function(t){var a={node:t,event:o[0]};r&&(a.delegate=r),i.push(e.listener(a,n))}),o[1]&&this.data(o[1],i),this},detach:function(e){return t(this,"detach",e,null,!0),this.data(e,null),this},fire:function(e,n){return t(this,"fire",e,n)},delegate:function(e,t,n){return this.attach(e,n,t)}})}(snack,document),__Ajax=SYSLIB.namespace("syslib.ajax"),__Ajax.post=function(e,t,n,r,o,i){var a=o?!1:!0;snack.request({method:"post",url:e,format:"json",data:t,async:a,timeout:i?i:36e3},function(e,t){return t=JSON.parse(t),e&&r?(r(errorThrown),void 0):(n&&n(t),void 0)})},__Ajax.getfile=function(e,t,n,r){var o="";return snack.request({method:"get",format:"html",url:e,async:r?r:!1,timeout:36e3},function(e,r){return e&&n?(n(errorThrown),void 0):(t?t(r):o=r,void 0)}),o},__Ajax.load=function(e,t,n){snack.request({method:"get",dataType:"html",url:e,timeout:1e5},function(e,r){return e&&n?(n(e),void 0):(t&&t(r),r)})};var _post=SYSLIB.namespace("syslib.ajax").post;__Vilade=SYSLIB.namespace("syslib.vilade"),__Vilade.list={email:function(e){return/^((([a-z]|\d|[!#\$%&'\*\+\-\/ = \?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/ = \?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(e)},url:function(e){return/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,; = ]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,; = ]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,; = ]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,; = ]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,; = ]|:|@)|\/|\?)*)?$/i.test(e)},date:function(e){return!/Invalid|NaN/.test(new Date(e).toString())},dateISO:function(e){return/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(e)},number:function(e){return/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e)},digits:function(e){return/^\d+$/.test(e)},letterswithbasicpunc:function(e){return/^[a-z\-.,()'"\s]+$/i.test(e)},"alpha+numer":function(e){return/^\w+$/i.test(e)},lettersonly:function(e){return/^[a-z]+$/i.test(e)},nowhitespace:function(e){return/^\S+$/i.test(e)},"int":function(e){return/^-?\d+$/.test(e)},"+int":function(e){return/^[0-9]*[1-9][0-9]*$/.test(e)},"0+int":function(e){return/^\d+$/.test(e)},"0-int":function(e){return/^((-\d+)|(0+))$/.test(e)},"-int":function(e){return/^-[0-9]*[1-9][0-9]*$/.test(e)},"0+float":function(e){return/^\d+(\.\d+)?$/.test(e)},"+float":function(e){return/^(([0-9]+\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\.[0-9]+)|([0-9]*[1-9][0-9]*))$/.test(e)},"0-float":function(e){return/^((-\d+(\.\d+)?)|(0+(\.0+)?))$/.test(e)},"-float":function(e){return/^(-(([0-9]+\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\.[0-9]+)|([0-9]*[1-9][0-9]*)))$/.test(e)},"float":function(e){return/^(-?\d+)(\.\d+)?$/.test(e)},alpha:function(e){return/^[A-Za-z]+$/.test(e)},ualpha:function(e){return/^[A-Z]+$/.test(e)},lalpha:function(e){return/^[a-z]+$/.test(e)},chinesemobile:function(e){return/^1[3|4|5|8][0-9]\d{4,8}$/.test(e)},chineseid:function(e){var e,t,n,r,o,i={11:"北京",12:"天津",13:"河北",14:"山西",15:"内蒙古",21:"辽宁",22:"吉林",23:"黑龙江",31:"上海",32:"江苏",33:"浙江",34:"安徽",35:"福建",36:"江西",37:"山东",41:"河南",42:"湖北",43:"湖南",44:"广东",45:"广西",46:"海南",50:"重庆",51:"四川",52:"贵州",53:"云南",54:"西藏",61:"陕西",62:"甘肃",63:"青海",64:"宁夏",65:"新疆",71:"台湾",81:"香港",82:"澳门",91:"国外"},a=new Array,a=e.split("");if(null==i[parseInt(e.substr(0,2))])return!1;switch(e.length){case 15:return ereg=0==(parseInt(e.substr(6,2))+1900)%4||0==(parseInt(e.substr(6,2))+1900)%100&&0==(parseInt(e.substr(6,2))+1900)%4?/^[1-9][0-9]{5}[0-9]{2}((01|03|05|07|08|10|12)(0[1-9]|[1-2][0-9]|3[0-1])|(04|06|09|11)(0[1-9]|[1-2][0-9]|30)|02(0[1-9]|[1-2][0-9]))[0-9]{3}$/:/^[1-9][0-9]{5}[0-9]{2}((01|03|05|07|08|10|12)(0[1-9]|[1-2][0-9]|3[0-1])|(04|06|09|11)(0[1-9]|[1-2][0-9]|30)|02(0[1-9]|1[0-9]|2[0-8]))[0-9]{3}$/,ereg.test(e)?!0:!1;case 18:return ereg=0==parseInt(e.substr(6,4))%4||0==parseInt(e.substr(6,4))%100&&0==parseInt(e.substr(6,4))%4?/^[1-9][0-9]{5}19[0-9]{2}((01|03|05|07|08|10|12)(0[1-9]|[1-2][0-9]|3[0-1])|(04|06|09|11)(0[1-9]|[1-2][0-9]|30)|02(0[1-9]|[1-2][0-9]))[0-9]{3}[0-9Xx]$/:/^[1-9][0-9]{5}19[0-9]{2}((01|03|05|07|08|10|12)(0[1-9]|[1-2][0-9]|3[0-1])|(04|06|09|11)(0[1-9]|[1-2][0-9]|30)|02(0[1-9]|1[0-9]|2[0-8]))[0-9]{3}[0-9Xx]$/,ereg.test(e)?(r=7*(parseInt(a[0])+parseInt(a[10]))+9*(parseInt(a[1])+parseInt(a[11]))+10*(parseInt(a[2])+parseInt(a[12]))+5*(parseInt(a[3])+parseInt(a[13]))+8*(parseInt(a[4])+parseInt(a[14]))+4*(parseInt(a[5])+parseInt(a[15]))+2*(parseInt(a[6])+parseInt(a[16]))+1*parseInt(a[7])+6*parseInt(a[8])+3*parseInt(a[9]),t=r%11,o="F",n="10X98765432",o=n.substr(t,1),o==a[17]?!0:!1):!1;default:return!1}},sysupass:function(e){return/^[0-9a-zA-Z\!\?\@\#\$\%\^\&\*\(\)\[\]\{\}\|\\]{6,64}$/.test(e)},systag:function(e){return/^[0-9a-zA-Z\u4e00-\u9fa5\']{1,4}$/.test(e)},sysitemname:function(e){return/^[\S]{1,24}$/.test(e)},chineseonly:function(e){return/^[\u4e00-\u9fa5]{1,}$/.test(e)},sysuname:function(e){return/^[0-9a-zA-Z\u4e00-\u9fa5\_]{1,12}$/.test(e)}},__Vilade.vilade=function(e,t){return __Vilade.list[t]?__Vilade.list[t](e):(__Error.log(2,"Vilade : can't find "+t),void 0)};var _is=SYSLIB.namespace("syslib.vilade").vilade;__Cookies=SYSLIB.namespace("syslib.cookies"),__Cookies.get=function(e,t){var n=t||"";if(document.cookie.length>0){if(c_start=document.cookie.indexOf(e+" = "),-1==c_start&&(c_start=document.cookie.indexOf(e+"=")),-1!=c_start){c_start=c_start+e.length+1,c_end=document.cookie.indexOf(";",c_start),-1==c_end&&(c_end=document.cookie.length);var r=unescape(document.cookie.substring(c_start,c_end));return""!=r?r:n}return n}return n},__Cookies.set=function(e,t,n){var r=new Date;r.setDate(r.getDate()+(n||14)),document.cookie=e+" = "+escape(t)+(null==n?"":";expires = "+r.toGMTString()+"; path = /")},__Cookies.clean=function(e){__Cookies.set(e,"")};var self=this;if(self.URL=self.URL||self.webkitURL,self.requestFileSystem=self.requestFileSystem||self.webkitRequestFileSystem,self.resolveLocalFileSystemURL=self.resolveLocalFileSystemURL||self.webkitResolveLocalFileSystemURL,navigator.temporaryStorage=navigator.temporaryStorage||navigator.webkitTemporaryStorage,navigator.persistentStorage=navigator.persistentStorage||navigator.webkitPersistentStorage,self.BlobBuilder=self.BlobBuilder||self.MozBlobBuilder||self.WebKitBlobBuilder,void 0===self.FileError){var FileError=function(){};FileError.prototype.prototype=Error.prototype}var Util={toArray:function(e){return Array.prototype.slice.call(e||[],0)},strToDataURL:function(e,t,n){return(void 0!=n?n:1)?"data:"+t+";base64,"+self.btoa(e):"data:"+t+","+e},strToObjectURL:function(e,t){for(var n=new Uint8Array(e.length),r=0;r<n.length;++r)n[r]=e.charCodeAt(r);return n=new Blob([n],t?{type:t}:{}),self.URL.createObjectURL(n)},fileToObjectURL:function(e){return self.URL.createObjectURL(e)},fileToArrayBuffer:function(e,t,n){var r=new FileReader;r.onload=function(e){t(e.target.result)},r.onerror=function(e){n&&n(e)},r.readAsArrayBuffer(e)},dataURLToBlob:function(e){if(-1==e.indexOf(";base64,")){var t=e.split(","),e=t[0].split(":")[1],t=t[1];return new Blob([t],{type:e})}for(var t=e.split(";base64,"),e=t[0].split(":")[1],t=window.atob(t[1]),n=t.length,r=new Uint8Array(n),o=0;n>o;++o)r[o]=t.charCodeAt(o);return new Blob([r],{type:e})},arrayBufferToBlob:function(e,t){var n=new Uint8Array(e);return new Blob([n],t?{type:t}:{})},arrayBufferToBinaryString:function(e,t,n){var r=new FileReader;r.onload=function(e){t(e.target.result)},r.onerror=function(e){n&&n(e)},e=new Uint8Array(e),r.readAsBinaryString(new Blob([e]))},arrayToBinaryString:function(e){if("object"!=typeof e)return null;for(var t=e.length,n=Array(t);t--;)n[t]=String.fromCharCode(e[t]);return n.join("")},getFileExtension:function(e){var t=e.lastIndexOf(".");return-1!=t?e.substring(t):""
}},MyFileError=function(e){this.prototype=FileError.prototype,this.code=e.code,this.name=e.name};FileError.BROWSER_NOT_SUPPORTED=1e3,FileError.prototype.__defineGetter__("name",function(){for(var e,t=Object.keys(FileError),n=0;e=t[n];++n)if(FileError[e]==this.code)return e;return"Unknown Error"});var Filer=new function(){function e(e){(t=e||null)&&(n=t.root,r=!0)}var t=null,n=null,r=!1,o=function(e){return 0==e.indexOf("filesystem:")},i=function(e){return o(e)||(e="/"==e[0]?t.root.toURL()+e.substring(1):0==e.indexOf("./")||0==e.indexOf("../")?"../"==e&&n!=t.root?n.toURL()+"/"+e:n.toURL()+e:n.toURL()+"/"+e),e},a=function(e){var t=arguments[1],n=arguments[2],r=function(e){if(e.code==FileError.NOT_FOUND_ERR){if(n)throw Error('"'+t+'" or "'+n+'" does not exist.');throw Error('"'+t+'" does not exist.')}throw Error("Problem getting Entry for one or more paths.")},o=i(t);if(3==arguments.length){var a=i(n);self.resolveLocalFileSystemURL(o,function(t){self.resolveLocalFileSystemURL(a,function(n){e(t,n)},r)},r)}else self.resolveLocalFileSystemURL(o,e,r)},s=function(e,n,r,o,i,s){if(!t)throw Error("Filesystem has not been initialized.");if(typeof e!=typeof n)throw Error("These method arguments are not supported.");var l=r||null,u=void 0!=s?s:!1;(e.isFile||n.isDirectory)&&n.isDirectory?u?e.moveTo(n,l,o,i):e.copyTo(n,l,o,i):a(function(e,t){if(t.isDirectory)u?e.moveTo(t,l,o,i):e.copyTo(t,l,o,i);else{var n=Error('Oops! "'+t.name+" is not a directory!");if(!i)throw n;i(n)}},e,n)};return e.DEFAULT_FS_SIZE=1048576,e.version="0.4.1",e.prototype={get fs(){return t},get isOpen(){return r},get cwd(){return n}},e.prototype.pathToFilesystemURL=function(e){return i(e)},e.prototype.init=function(e,o,i){if(!self.requestFileSystem)throw new MyFileError({code:FileError.BROWSER_NOT_SUPPORTED,name:"BROWSER_NOT_SUPPORTED"});var e=e?e:{},a=e.size||1048576;this.type=self.TEMPORARY,"persistent"in e&&e.persistent&&(this.type=self.PERSISTENT);var s=function(e){this.size=a,t=e,n=t.root,r=!0,o&&o(e)};this.type==self.PERSISTENT&&navigator.persistentStorage?navigator.persistentStorage.requestQuota(a,function(e){self.requestFileSystem(this.type,e,s.bind(this),i)}.bind(this),i):self.requestFileSystem(this.type,a,s.bind(this),i)},e.prototype.ls=function(e,r,s){if(!t)throw Error("Filesystem has not been initialized.");var l=function(e){n=e;var t=[],o=n.createReader(),i=function(){o.readEntries(function(e){e.length?(t=t.concat(Util.toArray(e)),i()):(t.sort(function(e,t){return e.name<t.name?-1:t.name<e.name?1:0}),r(t))},s)};i()};e.isDirectory?l(e):o(e)?a(l,i(e)):n.getDirectory(e,{},l,s)},e.prototype.mkdir=function(e,r,o,i){if(!t)throw Error("Filesystem has not been initialized.");var a=null!=r?r:!1,s=e.split("/"),l=function(t,n){("."==n[0]||""==n[0])&&(n=n.slice(1)),t.getDirectory(n[0],{create:!0,exclusive:a},function(t){if(t.isDirectory)n.length&&1!=s.length?l(t,n.slice(1)):o&&o(t);else{if(t=Error(e+" is not a directory"),!i)throw t;i(t)}},function(t){if(t.code==FileError.INVALID_MODIFICATION_ERR){if(t.message="'"+e+"' already exists",!i)throw t;i(t)}})};l(n,s)},e.prototype.open=function(e,n,r){if(!t)throw Error("Filesystem has not been initialized.");e.isFile?e.file(n,r):a(function(e){e.file(n,r)},i(e))},e.prototype.create=function(e,r,o,i){if(!t)throw Error("Filesystem has not been initialized.");n.getFile(e,{create:!0,exclusive:null!=r?r:!0},o,function(t){if(t.code==FileError.INVALID_MODIFICATION_ERR&&(t.message="'"+e+"' already exists"),!i)throw t;i(t)})},e.prototype.mv=function(e,t,n,r,o){s.bind(this,e,t,n,r,o,!0)()},e.prototype.rm=function(e,n,r){if(!t)throw Error("Filesystem has not been initialized.");var o=function(e){e.isFile?e.remove(n,r):e.isDirectory&&e.removeRecursively(n,r)};e.isFile||e.isDirectory?o(e):a(o,e)},e.prototype.cd=function(e,r,o){if(!t)throw Error("Filesystem has not been initialized.");e.isDirectory?(n=e,r&&r(n)):(e=i(e),a(function(e){if(e.isDirectory)n=e,r&&r(n);else{if(e=Error("Path was not a directory."),!o)throw e;o(e)}},e))},e.prototype.cp=function(e,t,n,r,o){s.bind(this,e,t,n,r,o)()},e.prototype.write=function(e,r,i,s){if(!t)throw Error("Filesystem has not been initialized.");var l=function(e){e.createWriter(function(t){if(t.onerror=s,r.append)t.onwriteend=function(){i&&i(e,this)},t.seek(t.length);else{var n=!1;t.onwriteend=function(){n?i&&i(e,this):(n=!0,this.truncate(this.position))}}r.data.__proto__==ArrayBuffer.prototype&&(r.data=new Uint8Array(r.data));var o=new Blob([r.data],r.type?{type:r.type}:{});t.write(o)},s)};e.isFile?l(e):o(e)?a(l,e):n.getFile(e,{create:!0,exclusive:!1},l,s)},e};__File=SYSLIB.namespace("syslib.file"),__File.file=new Filer,__File.save_to_ls=function(e,t,n,r){if(e&&n){if(!t)var t=10;if(!r)var r=0;switch(r){case 1:e=JSON.stringify(e)}__File.file.init({persistent:!0,size:1024*1024*t},function(){var t=function(){__File.file.write(n,{data:e,type:"application/octet-stream"},function(){},function(){__Error.log(2,"File : Faild To save files "+n)})};t()},function(){__Error.log(2,"File : Faild To save files "+n)})}},__File.load_from_ls=function(e,t,n){if(!e)return n(0),void 0;var r=function(e){switch(t){case 1:e=JSON.parse(e)}n(e)};try{__File.file.init({persistent:!0,size:209715200},function(){__File.file.open(e,function(e){var t=new FileReader;t.onload=function(){return function(e){r(e.target.result)}}(e),t.readAsText(e)},function(){__Error.log(2,"File : Faild To open files "+e),n(0)})},function(){__Error.log(2,"File : Faild To open files "+e),n(0)})}catch(o){n(0)}},__Geo=SYSLIB.namespace("syslib.geo"),__Geo.get=function(e,t){var n=function(e,t,n){navigator.geolocation?navigator.geolocation.getCurrentPosition(e,function(e){switch(e.code){case e.PERMISSION_DENIED:console.log("GEO: User denied the request for Geolocation.");break;case e.POSITION_UNAVAILABLE:console.log("GEO: Location information is unavailable.");break;case e.TIMEOUT:console.log("GEO: The request to get user location timed out.");break;case e.UNKNOWN_ERROR:console.log("GEO: An unknown error occurred.")}t?t():n&&n()}):t&&t()};n(function(n){snack.JSONP({url:"http://api.map.baidu.com/geocoder/v2/",key:"callback",data:{ak:"6f7bcd8ebbe8209777f27f32fed49746",location:n.coords.latitude+","+n.coords.longitude,output:"json",pois:1}},function(r){if(!r||!r.result)return t();var o={accuracy:n.coords.accuracy,altitude:n.coords.altitude,altitudeAccuracy:n.coords.altitudeAccuracy,heading:n.coords.heading,latitude:n.coords.latitude,longitude:n.coords.longitude,speed:n.coords.speed,timestamp:n.timestamp,address:r.result.formatted_address,city:r.result.addressComponent.city,district:r.result.addressComponent.district,province:r.result.addressComponent.province,street:r.result.addressComponent.street,street_number:r.result.addressComponent.street_number};e(o)})},function(){snack.JSONP({url:"http://api.map.baidu.com/location/ip",data:{ak:"6f7bcd8ebbe8209777f27f32fed49746"},key:"callback"},function(n){if(!n||!n.content)return t();var r={accuracy:0,altitude:0,altitudeAccuracy:0,heading:0,latitude:n.content.point.x,longitude:n.content.point.y,speed:0,timestamp:(new Date).getTime(),address:n.content.address,city:n.content.address_detail.city,district:n.content.address_detail.district,province:n.content.address_detail.province,street:n.content.address_detail.street,street_number:n.content.address_detail.street_number};e(r)})},t)},__Sound=SYSLIB.namespace("syslib.sound"),__Sound.list=[],__Sound.add=function(e,t){__Sound.list[e]?__Error.log(1,"Sound : sound "+e+" is already exist."):__Sound.list[e]=t},__Sound.device=document.createElement("audio"),__Sound.play=function(e){__Sound.device.src=__Sound.list[e],__Sound.device.play()};var __Util=SYSLIB.namespace("syslib.util");__Util.UA=function(){var e=window.navigator&&navigator.userAgent||"";return{isChrome:/webkit\W.*(chrome|chromium)\W/i.test(e),isFirefox:/mozilla.*\Wfirefox\W/i.test(e),isGecko:/mozilla(?!.*webkit).*\Wgecko\W/i.test(e),isIE:function(){return"Microsoft Internet Explorer"===navigator.appName},isKindle:/\W(kindle|silk)\W/i.test(e),isMobile:/(iphone|ipod|(android.*?mobile)|blackberry|nokia)/i.test(e),isOpera:/opera.*\Wpresto\W/i.test(e),isSafari:/webkit\W(?!.*chrome).*safari\W/i.test(e),isTablet:/(ipad|android(?!.*mobile))/i.test(e),isTV:/googletv|sonydtv/i.test(e),isWebKit:/webkit\W/i.test(e),isAndroid:/android/i.test(e),isIOS:/(ipad|iphone|ipod)/i.test(e),isIPad:/ipad/i.test(e),isIPhone:/iphone/i.test(e),isIPod:/ipod/i.test(e),whoami:function(){return e}}},__Util.checkFather=function(e,t){var n=t.relatedTarget;try{for(;n&&n!==e;)n=n.parentNode;return n!==e}catch(t){}},__Util.globalposition=function(e){for(var t=e,n={x:0,y:0};null!=t;)n.x+=t.offsetLeft,n.y+=t.offsetTop,t=t.offsetParent;return n},__Util.title=function(e){document.title=e},__Util.brhistory=function(e){var t={title:document.title,url:window.location.href,action:e?e:0};history.pushState(t,t.title,t.url)},__Util.url=function(e){window.location.href=SYSLIB.baseurl+"#"+e},__Util.preventDefault=function(e){e=e||window.event,e.preventDefault&&e.preventDefault(),e.returnValue=!1},__Util.clone=function(e){if(null==e||"object"!=typeof e)return e;if(e instanceof Date){var t=new Date;return t.setTime(e.getTime()),t}if(e instanceof Array){for(var t=[],n=0,r=e.length;r>n;n++)t[n]=__Util.clone(e[n]);return t}if(e instanceof Object){var t={};for(var o in e)e.hasOwnProperty(o)&&(t[o]=__Util.clone(e[o]));return t}__Error.log(2,"Util.clone : Unable to copy obj! Its type isn't supported.")},__Util.token=function(e){var t=0,n=e||32,r=Array(0,1,2,3,4,5,6,7,8,9,"a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"),o="";for(t=0;n>t;t++){var i=__Math.rand(0,61);o+=r[i]}return o},__Util.base64={EncodeChars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",DecodeChars:new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1),decode:function(e){for(var t,n,r,o,i=0,a=e.length,s="";a>i;){do t=__Util.base64.DecodeChars[255&e.charCodeAt(i++)];while(a>i&&-1==t);if(-1==t)break;do n=__Util.base64.DecodeChars[255&e.charCodeAt(i++)];while(a>i&&-1==n);if(-1==n)break;s+=String.fromCharCode(t<<2|(48&n)>>4);do{if(r=255&e.charCodeAt(i++),61==r)return s;r=__Util.base64.DecodeChars[r]}while(a>i&&-1==r);if(-1==r)break;s+=String.fromCharCode((15&n)<<4|(60&r)>>2);do{if(o=255&e.charCodeAt(i++),61==o)return s;o=__Util.base64.DecodeChars[o]}while(a>i&&-1==o);if(-1==o)break;s+=String.fromCharCode((3&r)<<6|o)}return s},encode:function(e){for(var t,n,r,o=0,i=e.length,a="";i>o;){if(t=255&e.charCodeAt(o++),o==i){a+=__Util.base64.EncodeChars.charAt(t>>2),a+=__Util.base64.EncodeChars.charAt((3&t)<<4),a+=" == ";break}if(n=e.charCodeAt(o++),o==i){a+=__Util.base64.EncodeChars.charAt(t>>2),a+=__Util.base64.EncodeChars.charAt((3&t)<<4|(240&n)>>4),a+=__Util.base64.EncodeChars.charAt((15&n)<<2),a+=" = ";break}r=e.charCodeAt(o++),a+=__Util.base64.EncodeChars.charAt(t>>2),a+=__Util.base64.EncodeChars.charAt((3&t)<<4|(240&n)>>4),a+=__Util.base64.EncodeChars.charAt((15&n)<<2|(192&r)>>6),a+=__Util.base64.EncodeChars.charAt(63&r)}return a},utf8to16:function(e){for(var t,n,r,o=0,i=e.length,a="";i>o;)switch(t=e.charCodeAt(o++),t>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:a+=e.charAt(o-1);break;case 12:case 13:n=e.charCodeAt(o++),a+=String.fromCharCode((31&t)<<6|63&n);break;case 14:n=e.charCodeAt(o++),r=e.charCodeAt(o++),a+=String.fromCharCode((15&t)<<12|(63&n)<<6|(63&r)<<0)}return a},utf16to8:function(e){var t,n,r=e.length,o="";for(t=0;r>t;t++)n=e.charCodeAt(t),n>=1&&127>=n?o+=e.charAt(t):n>2047?(o+=String.fromCharCode(224|15&n>>12),o+=String.fromCharCode(128|63&n>>6),o+=String.fromCharCode(128|63&n>>0)):(o+=String.fromCharCode(192|31&n>>6),o+=String.fromCharCode(128|63&n>>0));return o}};var _title=SYSLIB.namespace("syslib.util").title,_pushhistory=SYSLIB.namespace("syslib.util").brhistory,_seturl=SYSLIB.namespace("syslib.util").url,_clone=SYSLIB.namespace("syslib.utils").clone;